设Ncpu表示一个系统的处理器数目，N.pu的具体值可以通过如下Java代码获取:
int ncPU = Runtime.getRuntime().availableProcessors();

线程数的合理值可以根据以下规则设置。
·对于CPU密集型线程，考虑到这类线程执行任务时消耗的主要是处理器资源，我们可以将这类线程的线程数设置为Ncpu个。
因为CPU密集型线程也可能由于某些原因（比如缺页中断/Page Fault)而被切出，此时为了避免处理器资源浪费，
我们也可以为这类线程设置一个额外的线程，即将线程数设置为Ncpu+1。

对于IO密集型线程，考虑到I/O操作可能导致上下文切换，为这样的线程设置过多的线程数会导致过多的额外系统开销。
因此如果一个这样的工作者线程就足以满足我们的要求，那么就不要设置更多的线程数。
例如，在本章的第2个实战案例中我们仅使用一个工作者线程去负责所有日志文件的读取。
如果一个工作者线程仍然不够用，那么我们可以考虑将这类线程的数量设置为2×Ncpu。
这是因为I/O密集型线程在等待IO操作返回结果时是不占用处理器资源的,因此我们可以为每个处理器安排一个额外的线程以提高处理器资源的利用率。

提示对于CPU密集型线程，线程数通常可以设置为Ncpu+1;对于I/O密集型线程，优先考虑将线程数设置为1，
仅在一个线程不够用的情况下将线程数向2×Ncpu靠近。
商用软件往往会规定某个软件在其运行过程中对处理器的使用率不能超过某个阈值(如75%)。
因此，如果要进一步“精确”地设置线程数，我们可能需要考虑目标处理器使用率，即我们期望软件运行过程中会保持多少平均CPU使用率。
另外，如果任务本身是混合型而又不太好将其拆分成CPU密集型和IО密集型的子任务的话，也可以考虑不拆分。此时，我们可以参考式( 4-5）来设置线程数:

