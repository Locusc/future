下面我们通过一个大文件下载器的设计与实现来进一步讲解基于数据的分割。
在日常生活中，我们下载大文件的时候往往是使用专门的下载软件而不是直接使用浏览器。
这些下载软件下载大文件时比较快的一个重要原因就是它们使用多线程技术。
例如，一个大小为600MB的文件在网络带宽为100Mbps 的情况下，使用单个线程下载该文件至少需要耗时48( = 600/(100/8))秒。
如果我们采用3个线程来下载该文件，其中每个线程分别下载该文件的一个部分,
那么下载这个文件所需的时间基本上可以减少为16( =600/3/(100/8))秒，比起单线程下载节省了2/3的时间。

按照这个思路实现的一个基于多线程的大文件下载器，代码如清单4-1所示。
首先，我们先获取待下载资源的大小2，这个大小相当于文件下载器的输入数据的原始规模（总规模)。
接着，我们根据设定的下载线程数( workerThreadsCount)来决定子任务的总个数，
并由此确定每个子任务负责下载的数据段的范围(（起始字节到结束字节，lowerBound ~upperBound )。
然后我们分别创建相应的下载子任务(DownloadTask类实例，代码见清单4-2）并为每个下载任务创建相应的下载线程。
这些线程启动后就会并发地下载大文件中的相应部分。

1即这些线程分别下载该文件第0 ~208666624 ( =199×1024×1024）字节部分、209715200
(=200×1024×1024 ) ~418381824( =399×1024×1024)字节部分和419430400(=400×1024×1024) ~629145600 ( =600×1024×1024)字节部分。

2通过给服务器发起一个HTTP Head请求，并读取响应中的HTTP头字段Content-Length就可以实现
这一点。



