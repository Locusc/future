12.1.3 偏向锁
偏向锁( Biased Locking)是Java虚拟机对锁的实现所做的一种优化。这种优化基于这样的观测结果(Observation):大多数锁并没有被争用(Contented )，
并且这些锁在其整个生命周期内至多只会被一个线程持有。
然而, Java虚拟机在实现 monitorenter字节码(申请锁）和 monitorexit字节码（释放锁)时需要借助一个原子操作（CAS操作)，这个操作代价相对来说比较昂贵。
因此，Java虚拟机会为每个对象维护一个偏好(（Bias )，即一个对象对应的内部锁第1次被一个线程获得,那么这个线程就会被记录为该对象的偏好线程(Biased Thread )。
这个线程后续无论是再次申请该锁还是释放该锁，都无须借助原先（指未实施偏向锁优化前）昂贵的原子操作，从而减少了锁的申请与释放的开销。
然而，一个锁没有被争用并不代表仅仅只有一个线程访问该锁，当一个对象的偏好线程以外的其他线程申请该对象的内部锁时，
Java虚拟机需要收回( Revoke)该对象对原偏好线程的“偏好”并重新设置该对象的偏好线程。这个偏好收回和重新分配过程的代价也是比较昂贵的，
因此如果程序运行过程中存在比较多的锁争用的情况，那么这种偏好收回和重新分配的代价便会被放大。
有鉴于此，偏向锁优化只适合于存在相当大一部分锁并没有被争用的系统之中。
如果系统中存在大量被争用的锁而没有被争用的锁仅占极小的部分，那么我们可以考虑关闭偏向锁优化。
偏向锁优化默认是开启的。要关闭偏向锁优化，
我们可以在Java程序的启动命令行中添加虚拟机参数"-XX:-UseBiasedLocking"(开启偏向锁优化可以使用虚拟机参数"-XX:+UseBiasedLocking")。
